{% extends "nav.html" %}
{% load static %}

{% block head %}
<!-- Optional: Add custom CSS here -->
<link rel="stylesheet" href="{% static 'static/dashboard.css' %}">
<style>
    /* Basic styling for demonstration */
    table, th, td {
        border: 1px solid black;
        border-collapse: collapse;
        padding: 10px;
        text-align: left;
    }
    th {
        background-color: #f2f2f2;
    }
    /* General Resets and Typography */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Arial', sans-serif; /* Consistent font throughout the dashboard */
}

body {
    background-color: #f4f4f4; /* Light grey background for the whole page */
    color: #333; /* Dark grey text for better readability */
    line-height: 1.6;
}

a {
    color: #333;
    text-decoration: none;
}

/* Dashboard Layout */
.dashboard-main {
    width: 85%;
    margin: 0 auto;
    padding: 20px;
    background: #fff; /* White background for the main dashboard area */
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); /* Subtle shadow for depth */
}

.dashboard-header {
    padding: 20px 0;
    border-bottom: 1px solid #ccc;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.driver-availability {
    font-size: 16px;
}

/* Information Cards */
.info-card {
    background: #e9e9e9; /* Light gray background for each card */
    padding: 15px;
    margin-top: 20px;
    border-radius: 5px; /* Rounded corners for the cards */
    display: inline-block;
    width: 30%;
    text-align: center;
}

.info-card h2 {
    margin-bottom: 10px;
    font-size: 22px;
    color: #333;
}

/* Table Styles */
table {
    width: 100%;
    margin-top: 20px;
    border-collapse: collapse;
}

table, th, td {
    border: 1px solid #ccc;
}

th, td {
    padding: 8px;
    text-align: left;
}

th {
    background-color: #f9f9f9; /* Lighter background for headers */
}

/* Buttons */
button {
    padding: 10px 15px;
    border: none;
    border-radius: 4px;
    background-color: #D24545; /* Brand color for buttons */
    color: white;
    cursor: pointer;
    margin-right: 10px;
}

button:hover {
    background-color: #bc3131; /* Darker on hover */
}

/* Footer Styles */
.dashboard-footer {
    padding: 20px;
    text-align: center;
    background: #ddd; /* Light gray background */
    position: relative;
    bottom: 0;
    width: 100%;
}

/* Responsive Layouts */
@media (max-width: 768px) {
    .dashboard-main {
        width: 95%;
    }

    .info-card {
        width: 100%; /* Full width for mobile */
        margin-bottom: 10px;
    }
}

</style>
{% endblock head %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Driver Dashboard - Ridease</title>
</head>
<body>
{% block body %}
    <div class="dashboard-main">
        <header class="dashboard-header">
            <h1>Welcome, {{ driver.name }}</h1>
            <div class="driver-availability">
                <label>Available for Rides:</label>
                <input type="checkbox" id="availabilityToggle" {% if driver.is_available %}checked{% endif %} onchange="toggleAvailability()">
            </div>
        </header>

        <section class="dashboard-overview">
            <div class="info-card">
                <h2>Total Earnings</h2>
                <p>₹{{ driver.earnings.total }}</p>
            </div>
            <div class="info-card">
                <h2>Rides Today</h2>
                <p>{{ driver.rides.today_count }}</p>
            </div>
            <div class="info-card">
                <h2>Rating</h2>
                <p>{{ driver.rating }}</p>
            </div>
        </section>

        <section class="ride-requests">
            <h2>Incoming Ride Requests</h2>
            <table>
                <thead>
                    <tr>
                        <th>From</th>
                        <th>To</th>
                        <th>Fare</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for request in ride_requests %}
                    <tr>
                        <td>{{ request.from_location }}</td>
                        <td>{{ request.to_location }}</td>
                        <td>₹{{ request.estimated_fare }}</td>
                        <td>
                            <button onclick="acceptRide({{ request.id }})">Accept</button>
                            <button onclick="declineRide({{ request.id }})">Decline</button>
                        </td>
                    </tr>
                    {% empty %}
                    <tr><td colspan="4">No incoming requests.</td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </section>

        <footer class="dashboard-footer">
            <p>Contact Support if you need help!</p>
        </footer>
    </div>

    <script>
        function toggleAvailability() {
            var checkBox = document.getElementById("availabilityToggle");
            console.log("Driver availability toggled:", checkBox.checked);
        }

        function acceptRide(requestId) {
            console.log("Accepting ride:", requestId);
            // Additional actions can be added here if needed
        }

        function declineRide(requestId) {
            console.log("Declining ride:", requestId);
            // Additional actions can be added here if needed
        }
    </script>
{% endblock body %}
</body>
</html>
